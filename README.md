# MSSQL MCP Server

é€™æ˜¯ä¸€å€‹ Model Context Protocol (MCP) ä¼ºæœå™¨ï¼Œæä¾›èˆ‡ Microsoft SQL Server è³‡æ–™åº«äº’å‹•çš„åŠŸèƒ½ã€‚æ”¯æ´è³‡æ–™åº«é€£æ¥ã€åˆ‡æ›ã€æŸ¥è©¢ç­‰æ“ä½œã€‚

## åŠŸèƒ½ç‰¹è‰²

- ğŸ”Œ **å½ˆæ€§é€£æ¥**: æ”¯æ´å¤šç¨® MSSQL é€£æ¥é…ç½®
- ğŸ”„ **è³‡æ–™åº«åˆ‡æ›**: å‹•æ…‹åˆ‡æ›ä¸åŒè³‡æ–™åº«
- ğŸ“Š **å®‰å…¨æŸ¥è©¢**: å…§å»ºå®‰å…¨æª¢æŸ¥ï¼Œé˜²æ­¢å±éšªæ“ä½œ
- ğŸ“‹ **è³‡æ–™è¡¨ç€è¦½**: åˆ—å‡ºè³‡æ–™è¡¨å’Œæ¬„ä½çµæ§‹
- ğŸ›¡ï¸ **éŒ¯èª¤è™•ç†**: å®Œå–„çš„éŒ¯èª¤è™•ç†å’Œå›å ±æ©Ÿåˆ¶

## å®‰è£èˆ‡è¨­å®š

### 1. å®‰è£ç›¸ä¾å¥—ä»¶

```bash
npm install
```

### 2. è¨­å®šç’°å¢ƒè®Šæ•¸

è¤‡è£½ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹æª”æ¡ˆï¼š

```bash
cp .env.example .env
```

ç·¨è¼¯ `.env` æª”æ¡ˆï¼Œå¡«å…¥æ‚¨çš„ MSSQL é€£æ¥è³‡è¨Šï¼š

```env
MSSQL_SERVER=your_server_address
MSSQL_PORT=1433
MSSQL_USER=your_username
MSSQL_PASSWORD=your_password
MSSQL_ENCRYPT=true
MSSQL_TRUST_SERVER_CERTIFICATE=false
```

### 3. å»ºç½®å°ˆæ¡ˆ

```bash
npm run build
```

### 4. å•Ÿå‹•ä¼ºæœå™¨

```bash
npm start
```

æˆ–é–‹ç™¼æ¨¡å¼ï¼š

```bash
npm run dev
```

## å¯ç”¨å·¥å…·

### è³‡æ–™åº«é€£æ¥ç®¡ç†

- **connect-database**: é€£æ¥åˆ° MSSQL ä¼ºæœå™¨
- **disconnect**: æ–·é–‹è³‡æ–™åº«é€£æ¥
- **connection-status**: æª¢æŸ¥é€£æ¥ç‹€æ…‹

### è³‡æ–™åº«æ“ä½œ

- **list-databases**: åˆ—å‡ºæ‰€æœ‰ä½¿ç”¨è€…è³‡æ–™åº«
- **switch-database**: åˆ‡æ›åˆ°æŒ‡å®šè³‡æ–™åº«
- **list-tables**: åˆ—å‡ºç›®å‰è³‡æ–™åº«çš„æ‰€æœ‰è³‡æ–™è¡¨
- **describe-table**: æŸ¥çœ‹è³‡æ–™è¡¨çš„æ¬„ä½çµæ§‹

### æŸ¥è©¢æ“ä½œ

- **execute-query**: åŸ·è¡Œ SQL æŸ¥è©¢èªå¥ï¼ˆåƒ…é™ SELECTï¼‰

## ä½¿ç”¨ç¯„ä¾‹

### åœ¨ Claude Code ä¸­ä½¿ç”¨

1. è¨­å®š MCP ä¼ºæœå™¨é…ç½®ï¼ˆ`.mcp.json`ï¼‰ï¼š

```json
{
  "mcpServers": {
    "mssql": {
      "command": "node",
      "args": ["path/to/mssql-mcp-server/build/index.js"]
    }
  }
}
```

2. åœ¨ Claude Code ä¸­ä½¿ç”¨å·¥å…·ï¼š

```
# é€£æ¥è³‡æ–™åº«
connect-database server="localhost" user="sa" password="your_password"

# åˆ—å‡ºè³‡æ–™åº«
list-databases

# åˆ‡æ›è³‡æ–™åº«
switch-database database="MyDatabase"

# åˆ—å‡ºè³‡æ–™è¡¨
list-tables

# æŸ¥çœ‹è³‡æ–™è¡¨çµæ§‹
describe-table tableName="Users"

# åŸ·è¡ŒæŸ¥è©¢
execute-query query="SELECT TOP 10 * FROM Users" limit=10
```

## å®‰å…¨æ€§æ³¨æ„äº‹é …

- æœ¬ä¼ºæœå™¨åƒ…å…è¨±åŸ·è¡Œ `SELECT` æŸ¥è©¢ï¼Œæœƒè‡ªå‹•é˜»æ“‹ `INSERT`ã€`UPDATE`ã€`DELETE` ç­‰ä¿®æ”¹æ€§æ“ä½œ
- å»ºè­°ä½¿ç”¨å…·æœ‰é©ç•¶æ¬Šé™çš„å°ˆç”¨è³‡æ–™åº«ä½¿ç”¨è€…å¸³è™Ÿ
- åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­è«‹å•Ÿç”¨ SSL/TLS åŠ å¯†é€£æ¥

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **é€£æ¥å¤±æ•—**
   - æª¢æŸ¥ä¼ºæœå™¨ä½å€å’Œé€£æ¥åŸ æ˜¯å¦æ­£ç¢º
   - ç¢ºèªä½¿ç”¨è€…åç¨±å’Œå¯†ç¢¼æ˜¯å¦æ­£ç¢º
   - æª¢æŸ¥ç¶²è·¯é€£æ¥å’Œé˜²ç«ç‰†è¨­å®š

2. **æ†‘è­‰éŒ¯èª¤**
   - å¦‚æœä½¿ç”¨è‡ªç°½åæ†‘è­‰ï¼Œå¯è¨­å®š `trustServerCertificate: true`
   - å»ºè­°åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ä½¿ç”¨æœ‰æ•ˆçš„ SSL æ†‘è­‰

3. **æ¬Šé™ä¸è¶³**
   - ç¢ºèªè³‡æ–™åº«ä½¿ç”¨è€…å…·æœ‰é©ç•¶çš„è®€å–æ¬Šé™
   - æª¢æŸ¥æ˜¯å¦æœ‰å­˜å–ç‰¹å®šè³‡æ–™åº«å’Œè³‡æ–™è¡¨çš„æ¬Šé™

## é–‹ç™¼

### å°ˆæ¡ˆçµæ§‹

```
src/
â”œâ”€â”€ index.ts          # MCP ä¼ºæœå™¨ä¸»ç¨‹å¼
â”œâ”€â”€ database.ts       # MSSQL è³‡æ–™åº«ç®¡ç†é¡åˆ¥
â””â”€â”€ types.ts          # TypeScript é¡å‹å®šç¾©
```

### å»ºç½®æŒ‡ä»¤

```bash
# é–‹ç™¼å»ºç½®
npm run dev

# ç”Ÿç”¢å»ºç½®
npm run build

# æ¸…ç†å»ºç½®æª”æ¡ˆ
npm run clean
```

## æˆæ¬Š

MIT License